# Проектная работа Спринт 1. Перевод приложения MESTO на микрофронтэнды

## Проектирование

Для проектирования микрофронтэндов используется предметно-ориентированная вертикальный подход. Ниже список выделенных доменов приложения MESTO

### Домены приложения MESTO

1 **AUTHENTICATION** (идентификация и проверка подлинности пользователя). Процессы домена:
- Регистрация новых пользователей
- Аутентификация с помощью логина и пароля

2 **PROFILE** (отображение и управление личными данными пользователя). Процессы домена:
- Отображение информации о пользователе
- Редактирование имени и описания
- Редактирование аватарки

3 **PLACE CARDS** (отображение и управление карточками места путешествий). Процессы домена:
- Отображение карточек и объединение их в единый список 
- Операции над карточками: добавление новой, удаление, редактирование
- Выставление отметки Мне нравится

### Метод интеграции микрофронтэндов

Для интеграции микрофронтендов выбран **Run time**- метод, как более гибкое и масштабируемое решению. Т.к. функционал для аутентифицированного и анонимного пользоватей существенно различается, **клиентская** композиция позволит оптимизировать загрузку сайта, динамически определяя необходимые модули на основании статуса пользователя.

### Выбор инструмента 

Для построения приложения на микрофронтэндах выбран фреймворк **Single SPA** на основании следующих пеимуществ:
- Простая настройки и конфигурация
- Несмотря на текущую реализацию всего функционала на React, не исключено использование других фреймворков для разработки новых модулей
- В проекте не используется Webpack, поэтому потенциальные преимущества Module Federation не будут реализованы

## Описание решения

Кодовая база исходного репозитория разделена на 6 частей:
- **основное приложение**, которое подгружает разные микрофронтенды - ```root-frontend```
- функция **агрегации блоков** заложена в ```layout-mfe``` (хэдер и футер) и ```main-page-mfe``` (сборка главной страницы аутентифицированного пользователя)
- три модуля для реализации **бизнес-функций** соответствуют описанным выше доменам: ```auth-mfe```, ```profile-mfe``` и ```places-mfe```

*Хэдер и футер вынесены в отдельной микрофронртэнд, т.к. с одной стороны являются общими для страниц, соответствующих разным состоянием пользователя, с другой стороны - есть потенциальная возможность создания страниц без этих элементов, так что рутовое приложение не должно их содержать.

### Состав и механики работы репозиториев

```root-frontend``` - основное приложение с конфигурацией, маршрутизациями и общими блоками. Запускается при открытии сайта
Компоненты:
- ```ProtectedRoute```
- ```App```                            

```auth-mfe``` - микрофронтэнд для процессов регистрациии и аутентификации пользователей. Запускается из ```root-frontend``` при открытии страниц /signin, /signup
Компоненты:
- ```Register```
- ```Login```
- ```InfoTooltip```

```main-page-mfe``` - микрофронтэнд для сборки главной страницы авторизованного пользователя. Запускается из ```root-frontend``` при открытии главной страницы

```profile-mfe``` - микрофронтэнд для отображение информации о пользователе и редактировании профиля. Запускается из ```main-page-mfe```
Компоненты:
- ```EditProfilePopup```
- ```EditAvatarPopup```
- ```ProfileCard```

```places-mfe``` - микрофронтэнд для работы с управления карточками мест путешествий: добавление новой карточки, отрисовка одной карточки и сбор их в единый листинг, выставление отметки Мне нравится. Запускается из ```main-page-mfe```
Компоненты:
- ```Card```
- ```AddPlacePopup```
- ```ImagePopup```
- ```Listing```

```layout-mfe``` - лэйаут страниц сайта. Запускается из ```main-page-mfe``` и ```auth-mfe```
Компоненты:
- ```Header```
- ```Footer```